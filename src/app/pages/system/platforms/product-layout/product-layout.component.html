<div class="main main-form main-form-with-tab"
     [ngClass]="{'main-form-has-tip': version.type === 'History' || (currentUserService.isSupplierUser() && version.type && changeVersion && version.type !== 'History') || ifShowTip('oneOrMore') || ifShowTip('frozen')  || ifShowTip('rejected')}">

    <div class="head-tip" *ngIf="version.type === 'History'">
        <div class="head-tip-content">
            <!--            <span class="icon-block icon-arr-left-blue icon-33" (click)="backHistory()"></span>-->
            <div class="tip-content">
                <div class="title" title="">{{getVersionName()}}</div>
                <div class="text" title="">{{getVersionInfo()}}</div>
            </div>
        </div>
    </div>

    <!--    <div *ngIf="currentUserService.isAdminUser()">-->
    <!--        <div class="head-tip" *ngIf="version.type === 'Publish' && changeVersion">-->
    <!--            <div class="head-tip-content">-->
    <!--                <div class="tip-content">-->
    <!--                    <div class="title" title="">New data submitted.</div>-->
    <!--                    <div class="text" title="">Profile updated at {{version.updateTime | dateFormat : 'h:mma D MMM YY'}}. Approve or reject changes by clicking the buttons.</div>-->
    <!--                </div>-->
    <!--            </div>-->
    <!--        </div>-->
    <!--    </div>-->
    <div class="head-tip warn-tip" *ngIf="ifShowTip('frozen') && currentUserService.isSupplierUser()">
        <div class="head-tip-content">
            <div class="tip-content">
                <div class="title tx-yellow" title="">The profile is frozen.</div>
                <div class="text tx-yellow" title="">Profile updated
                    at {{version.updateTime | dateFormat : 'h:mma D MMM YY'}}. New data pending approval. Contact
                    SuitabilityHub admin for more details.
                </div>
            </div>
        </div>
    </div>
    <div class="head-tip err-tip" *ngIf="ifShowTip('rejected')  && currentUserService.isSupplierUser()">
        <div class="head-tip-content">
            <div class="tip-content">
                <div class="title tx-red" title="">Data was rejected.</div>
                <div class="text tx-red" title="">Profile rejected
                    at{{version.updateTime | dateFormat : 'h:mma D MMM YY'}}.
                </div>
            </div>
        </div>
    </div>
    <div class="head-tip" *ngIf="ifShowTip('oneOrMore')">
        <div class="head-tip-content">
            <div class="tip-content">
                <div class="title" title="">One or more feature fields are added by Suitability Hub admin.</div>
                <div class="text" title="">Template updated at {{version.updateTime | dateFormat : 'h:mma D MMM YY'}} by
                    Suitability Hub admin. Click “Edit product” to fill in missing data if there’s any.
                </div>
            </div>
        </div>
    </div>

    <div class="sub-head sub-head-form">
        <div class="sub-title" (click)="backPage()">
            <span class="icon-block icon-arr-left-long icon-31 xs-mr-16"></span>
            {{product.name}}
        </div>

        <div class="btn-control-group"
             *ngIf="version.type && currentTab != 'change-history' && version.type != 'History'">
            <!--            <button class="btn text-danger">Archive</button>-->
            <div *ngIf="currentUserService.isAdminUser()">
                <button class="btn tx-red xs-ml-24" *ngIf="showEditButton('reject')" (click)="rejectUpdate()">Reject
                </button>
                <button class="btn btn-outline-blue-light xs-ml-24" *ngIf="showEditButton('edit')"
                        (click)="editProduct()">Edit
                </button>
                <button class="btn btn-purple xs-ml-24" *ngIf="showEditButton('approve')"
                        (click)="updateVersionStatus('Frozen')">Approve
                </button>
            </div>
            <div *ngIf="currentUserService.isSupplierUser()">
                <button class="btn btn-outline-blue-light xs-ml-24" *ngIf="showEditButton('edit')"
                        (click)="editProduct()">Edit Product
                </button>
                <button class="btn btn-purple xs-ml-24" *ngIf="showEditButton('updateStatus')"
                        (click)="updateVersionStatus('Wait')">Submit for review
                </button>
                <button class="btn btn-purple xs-ml-24" *ngIf="showEditButton('submit')" (click)="publishProduct()">
                    Submit for review
                </button>
            </div>
        </div>
    </div>

    <div class="tab-menu">
        <div class="tab-text {{configService.activeMatch(tab.name)}}"
             (click)="chooseTab(tab.name)"
             *ngFor="let tab of configService.tabTypeList()">
            {{tab.name}}
            <span class="line"></span>
            <span class="dot" *ngIf="isChange(tab.value)"></span>
        </div>
    </div>

    <router-outlet></router-outlet>
</div>
