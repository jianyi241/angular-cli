<div class="content">
    <div class="sub-head-selection">
        <h2>Step 1 - What are important for Floyd?</h2>
    </div>

    <div class="features-swiper" *ngIf="featureForm.groupVoList.length > 0">
        <swiper #swiper [config]="config" (slideChange)="slideChange($event)">
            <ng-template swiperSlide [virtualIndex]="groupIndex" *ngFor="let group of featureForm.groupVoList; let groupIndex = index">
                <div class="swiper-head">
                    <img [src]="group.attachmentVo?.visitUrl" alt="">
                    <div class="tip" (click)="selectGroupAll(group)">Select all features</div>
                </div>
                <div class="swiper-body">
                    <h3>{{group.name}}</h3>
                    <p [innerHTML]="group.description"></p>
                </div>
            </ng-template>
        </swiper>

        <div class="swiper-control">
            <div class="swiper-btn"  (click)="slideNext()">
                <span class="icon-block icon-slide-left icon-16"></span>
            </div>

            <ng-container *ngFor="let group of featureForm.groupVoList; let groupIndex = index">
                <span class="swiper-dot" [ngClass]="{'active': groupIndex == currentIndex}"></span>
            </ng-container>

            <div class="swiper-btn" (click)="slidePrev()">
                <span class="icon-block icon-slide-right icon-16"></span>
            </div>
        </div>

    </div>


    <div class="features-accordion">
        <div class="accordion-main" *ngIf="subGroups.length > 0">
            <div class="list">
                <ngb-accordion #acc="ngbAccordion" activeIds="ngb-panel-0" [destroyOnHide]="true">
                    <ngb-panel *ngFor="let subGroup of subGroups; let subGroupIndex = index;" id="ngb-panel-{{subGroupIndex}}">
                        <ng-template ngbPanelTitle="Collapse all 10 features">
                            <div class="accordion-head" style="display: flex; justify-content: space-between; width: 100%;">
                                <div class="text">
                                    <p class="sub-title">{{subGroup.name}}</p>
                                    <p [innerHTML]="subGroup.description"></p>
                                </div>
                                <div class="btn-right">Collapse all {{subGroup.propertyVoList.length}} features <span
                                        class="icon-block  ml-8 icon-20 icon-arr-blue"></span>
                                </div>
                            </div>
                        </ng-template>
                        <ng-template ngbPanelContent>
                            <div class="features-main">
                                <div class="features-list all-features">
                                    <div class="title">
                                        <h3>All features</h3>
                                        <button (click)="selectSubGroupAll(subGroup)">Select all</button>
                                    </div>
                                    <ul>
                                        <li [hidden]="prop.selected" *ngFor="let prop of subGroup.propertyVoList" (click)="selectProp(prop)">
                                            <div class="text">
                                                <p>{{prop.name}}</p>
                                                <i class="icon-block icon-15 icon-info-circle-purple"></i>
                                            </div>
                                            <button (click)="essential(prop, $event)" [ngClass]="{'tx-yellow': prop.essential}">Essential</button>
                                        </li>
                                    </ul>
                                </div>
                                <div class="features-list features-selected">
                                    <div class="title">
                                        <h3>Features selected</h3>
                                        <button (click)="deselectSubGroupAll(subGroup)">Deselect all</button>
                                    </div>
                                    <p class="sub-title" [hidden]="checkSelectList(subGroup.propertyVoList)">You havenâ€™t selected any features yet. Click on one of the
                                        features in LHS column to select.</p>
                                    <ul>
                                        <li [hidden]="!prop.selected" *ngFor="let prop of subGroup.propertyVoList" (click)="unSelectProp(prop)">
                                            <div class="text">
                                                <p>{{prop.name}}</p>
                                                <i class="icon-block icon-15 icon-info-circle-purple"></i>
                                            </div>
                                            <button (click)="essential(prop, $event)" [ngClass]="{'tx-yellow': prop.essential}">Essential</button>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </ng-template>
                    </ngb-panel>
                </ngb-accordion>
            </div>
        </div>
    </div>
</div>
